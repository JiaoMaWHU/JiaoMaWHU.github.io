<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="A summary of git data model and commonly used commands.">
<meta property="og:type" content="article">
<meta property="og:title" content="Git Summary">
<meta property="og:url" content="https://jiaomawhu.github.io/2020/05/15/tools/git/index.html">
<meta property="og:site_name" content="Jinshin&#39;s Blog">
<meta property="og:description" content="A summary of git data model and commonly used commands.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://jiaomawhu.github.io/images/git_structure.png">
<meta property="og:image" content="https://git-scm.com/book/en/v2/images/lifecycle.png">
<meta property="og:image" content="https://jiaomawhu.github.io/images/reset-co.png">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/4/25/162fcc0e7e711dc7?imageslim">
<meta property="og:updated_time" content="2020-05-28T04:43:54.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git Summary">
<meta name="twitter:description" content="A summary of git data model and commonly used commands.">
<meta name="twitter:image" content="https://jiaomawhu.github.io/images/git_structure.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Git Summary</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">    
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/05/31/cscore/network/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/05/03/cscore/multicore/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://jiaomawhu.github.io/2020/05/15/tools/git/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&text=Git Summary"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&is_video=false&description=Git Summary"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Git Summary&body=Check out this article: https://jiaomawhu.github.io/2020/05/15/tools/git/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&name=Git Summary&description=&lt;p&gt;A summary of git data model and commonly used commands.&lt;br&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://jiaomawhu.github.io/2020/05/15/tools/git/&t=Git Summary"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-model"><span class="toc-number">1.</span> <span class="toc-text">Data model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Objects-and-content-addressing"><span class="toc-number">2.</span> <span class="toc-text">Objects and content-addressing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">3.</span> <span class="toc-text">References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Repositories"><span class="toc-number">4.</span> <span class="toc-text">Repositories</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Staging-area"><span class="toc-number">5.</span> <span class="toc-text">Staging area</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commands"><span class="toc-number">6.</span> <span class="toc-text">Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">6.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Undo-Checkout-and-Reset"><span class="toc-number">6.2.</span> <span class="toc-text">Undo, Checkout and Reset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Remote"><span class="toc-number">6.3.</span> <span class="toc-text">Remote</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Branching-and-merging"><span class="toc-number">6.4.</span> <span class="toc-text">Branching and merging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Advanced-Git"><span class="toc-number">6.5.</span> <span class="toc-text">Advanced Git</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Miscellaneous"><span class="toc-number">6.6.</span> <span class="toc-text">Miscellaneous</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Summary"><span class="toc-number">6.7.</span> <span class="toc-text">Summary</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resources"><span class="toc-number">7.</span> <span class="toc-text">Resources</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Git Summary
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">Jinshin</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-05-15T19:28:14.000Z" itemprop="datePublished">2020-05-15</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Tools/">Tools</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>A summary of git data model and commonly used commands.<br><a id="more"></a></p>
<h2 id="Data-model"><a href="#Data-model" class="headerlink" title="Data model"></a>Data model</h2><p>Git is created by Linus to manage the Linux repository, so it’s designed for efficient repository changes tracking and version restoring and branch merging, etc.</p>
<p>Now, thinking as the creator, what should we consider to properly manage a repository? I’ll say that includes file,  directory, and modification.</p>
<p>In git, the data model of these structures are as follows.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// a file is a bunch of bytes</span><br><span class="line">type blob = array&lt;byte&gt;</span><br><span class="line"></span><br><span class="line">// a directory contains named files and directories</span><br><span class="line">type tree = map&lt;string, tree | file&gt;</span><br><span class="line"></span><br><span class="line">// a commit has parents, metadata, and the top-level tree</span><br><span class="line">type commit = struct &#123;</span><br><span class="line">    parent: array&lt;commit&gt;</span><br><span class="line">    author: string</span><br><span class="line">    message: string</span><br><span class="line">    snapshot: tree</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>A snapshot is the top-level tree that is being tracked. In the below example, a snapshot could be a tracked version of the root tree. And a commit contains not only the snapshot at this version but the parent commit, author, and message. </p>
<p>Now, it’s easy to image how these models can represent the whole structure, dependencies, modifications of a repository.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;root&gt; (tree)</span><br><span class="line">|</span><br><span class="line">+- foo (tree)</span><br><span class="line">|  |</span><br><span class="line">|  + bar.txt (blob, contents = &quot;hello world&quot;)</span><br><span class="line">|</span><br><span class="line">+- baz.txt (blob, contents = &quot;git is wonderful&quot;)</span><br></pre></td></tr></table></figure>
<p>In fact, a git history is a <strong>directed acyclic graph (DAG)</strong> of commits. Visualizing a commit history might look something like this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">o &lt;-- o &lt;-- o &lt;-- o</span><br><span class="line">            ^  </span><br><span class="line">             \</span><br><span class="line">              --- o &lt;-- o</span><br></pre></td></tr></table></figure></p>
<p>where each “o”, i.e. commit, is pointing to its parent commit (the older commit). After the third commit, the history branches into two separate branches. This might correspond to, for example, two separate features being developed in parallel, independently from each other.</p>
<h2 id="Objects-and-content-addressing"><a href="#Objects-and-content-addressing" class="headerlink" title="Objects and content-addressing"></a>Objects and content-addressing</h2><p>In Git data store, Blobs, trees, and commits are unified in this way: they are all objects. All objects are <strong>content-addressed</strong> by their SHA-1 hash (i.e. a hashed string with 40 characters).  When they reference other objects, they don’t actually contain them in their on-disk representation, but have a reference to them by their hash.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type object = blob | tree | commit</span><br><span class="line">objects = map&lt;string, object&gt;</span><br></pre></td></tr></table></figure></p>
<p>You can easily image this using the idea of pointer references, the only difference is that git uses the hashed values for addressing the content.</p>
<p>Since git uses content addressable storage, it means that commits in Git are immutable. This doesn’t mean that mistakes can’t be corrected, however; it’s just that “edits” to the commit history are actually creating entirely new commits.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>Now, all snapshots can be identified by their SHA-1 hash. That’s inconvenient, because humans aren’t good at remembering strings of 40 hexadecimal characters.</p>
<p> Solution to this problem is human-readable names for SHA-1 hashes, called “references”. References are pointers to commits. Unlike objects, which are immutable, references are mutable (can be updated to point to a new commit). For example, the master reference usually points to the latest commit in the main branch of development.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">references = map&lt;string, string&gt;</span><br></pre></td></tr></table></figure>
<p>With this, Git can use human-readable names like “master” to refer to a particular snapshot in the history, instead of a long hexadecimal string.</p>
<p>One detail is that we often want a notion of “where we currently are” in the history, so that when we take a new snapshot, we know what it is relative to (how we set the parents field of the commit). In Git, that “where we currently are” is a special reference called “HEAD”.</p>
<h2 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h2><p>Finally, we can define what (roughly) is a Git repository: it is the data <strong>objects</strong> and <strong>references</strong>.</p>
<p>On disk, all Git stores are objects and references: that’s all there is to Git’s data model. All git commands map to some manipulation of the commit DAG by adding objects and adding/updating references.</p>
<p>Whenever you’re typing in any command, think about what manipulation the command is making to the underlying graph data structure.</p>
<h2 id="Staging-area"><a href="#Staging-area" class="headerlink" title="Staging area"></a>Staging area</h2><p>One more thing to mention is that, imaging a scenario where you have print logs in your repository; you want to commit the code while discarding all the logs.</p>
<p>Git accommodates such scenarios by allowing you to specify which modifications should be included in the next snapshot through a mechanism called the “staging area”.</p>
<h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><p>Now let’s see some commonly used git commands. Before we get started, we should be able to relate the following figure with the concepts we discussed above, so that it’ll be easy to understand and memorize the git commands.</p>
<p><img src="/images/git_structure.png" alt="Git Components."></p>
<h3 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h3><ul>
<li><code>git init</code>: creates a new git repo, with data stored in the .git directory</li>
<li><code>git status</code>: tells you what’s going on</li>
<li><code>git add &lt;filename&gt;</code>: adds files to staging area</li>
<li><code>git commit</code>: creates a new commit</li>
<li><code>git log --all --graph --decorate</code>: visualizes history as a DAG</li>
<li><code>git diff &lt;filename&gt;</code>: show differences since the last commit</li>
<li><code>git diff &lt;revision&gt; &lt;revision&gt; &lt;filename&gt;</code>: shows differences in a file between snapshots</li>
</ul>
<h3 id="Undo-Checkout-and-Reset"><a href="#Undo-Checkout-and-Reset" class="headerlink" title="Undo, Checkout and Reset"></a>Undo, Checkout and Reset</h3><p>The status of git files is as follows.<br><img src="https://git-scm.com/book/en/v2/images/lifecycle.png" alt="status of git files"></p>
<ul>
<li><code>git commit --amend</code>: lets you combine staged changes with the previous commit instead of creating an entirely new commit. It can also be used to simply edit the previous commit message without changing its snapshot (creating a new one).</li>
<li><code>git checkout</code>: Updates files in the working tree to match the version in the index or the specified tree. If no <code>pathspec</code> was given, it will also update <strong>HEAD</strong> to set the specified branch as the current branch.<ul>
<li><code>git checkout &lt;revision&gt;</code>: no <code>pathspec</code>, updates <strong>HEAD</strong> and current branch</li>
<li><code>git checkout &lt;--&gt; &lt;file&gt;</code>: restore a file <strong>only</strong> to the workspace from the staging area</li>
<li><code>git checkout &lt;commit&gt; &lt;file&gt;</code>: restore a file to <strong>workspace</strong> and <strong>the staging area</strong> using the <code>commit</code> version in repository.</li>
</ul>
</li>
<li><code>git reset</code>: Reset the <strong>HEAD</strong> of current branch to the specified state.<ul>
<li>For <strong>HEAD</strong>: <code>git reset &lt;--soft | --mixed [-N] | --hard | --merge | --keep&gt;</code>: see the following table.</li>
<li>For files: <code>git reset &lt;commit&gt; &lt;file&gt;</code>: unstage a file, i.e, copy entries from <code>&lt;commit&gt;</code> to the staging area.</li>
</ul>
</li>
<li><p>To differentiate <code>reset</code> and <code>checkout</code>, check the following table.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">                         head    stage   work dir  wd safe</span><br><span class="line">Commit Level</span><br><span class="line">reset --soft [commit]    REF     NO      NO        YES</span><br><span class="line">reset [commit]           REF     YES     NO        YES</span><br><span class="line">reset --hard [commit]    REF     YES     YES       NO</span><br><span class="line">checkout [commit]        YES     YES     NO        YES</span><br><span class="line"></span><br><span class="line">File Level</span><br><span class="line">reset (commit) [file]    NO      YES     NO        YES</span><br><span class="line">checkout (commit) [file] NO      YES     YES       NO</span><br></pre></td></tr></table></figure>
</li>
<li><p>Note that reset will change the Reference values (REF) in <strong>HEAD</strong>, while checkout only load a new value to <strong>HEAD</strong>, which can be visualized as follows.<br><img src="/images/reset-co.png" alt="One more difference"></p>
</li>
<li>If we need to restore a file or the entire repository to a specific version, we can use <code>checkout [commit] .</code> so that we load the target content to the stage and the work dir, and <strong>HEAD</strong> won’t be changed. Instead, <code>reset [commit] .</code> won’t do anything to the work dir. </li>
<li>But if we want to discard all commits after <code>[commit]</code>, we should use <code>reset --hard [commit]</code> since <code>checkout</code> will load <strong>HEAD</strong> as that commit.</li>
<li><code>git stash</code> and <code>git stash pop</code>: temporarily remove modifications to working directory</li>
<li><code>git revert &lt;commit&gt;</code>: undo the changes of the <code>[commit]</code> in <strong>HEAD</strong> and create a new commit.</li>
<li><code>git restore &lt;file&gt;</code>: by default, load content from the staging area in <strong>HEAD</strong>.</li>
</ul>
<h3 id="Remote"><a href="#Remote" class="headerlink" title="Remote"></a>Remote</h3><ul>
<li><code>git remote</code>: list remotes</li>
<li><code>git remote add &lt;name&gt; &lt;url&gt;</code>: add a remote</li>
<li><code>git push &lt;remote&gt; &lt;local branch&gt;:&lt;remote branch&gt;</code>: send objects to remote, and update remote reference</li>
<li><code>git branch --set-upstream-to=&lt;remote&gt;/&lt;remote branch&gt;</code>: set up correspondence between local and remote branch</li>
<li><code>git branch -u o/master foo</code>: will set the foo branch to track o/master.</li>
<li><code>git fetch &lt;remote&gt; &lt;remote branch&gt;:&lt;local branch&gt;</code>: retrieve objects/references from a remote branch, it doesn’t require <strong>HEAD</strong> to be on target <code>&lt;commit&gt;</code>, and it doesn’t update your local non-remote branches. If no branch specified, fetch all the branches. </li>
<li><code>git pull &lt;remote&gt; &lt;remote branch&gt;:&lt;local branch&gt;</code>: During a pull operation, commits are downloaded onto o/master and then merged into the current branch. It basically a <code>fetch</code> and a <code>merge</code>.</li>
<li><code>git clone</code>: download repository from remote</li>
</ul>
<h3 id="Branching-and-merging"><a href="#Branching-and-merging" class="headerlink" title="Branching and merging"></a>Branching and merging</h3><ul>
<li><code>git branch</code>: shows branches</li>
<li><code>git branch &lt;name&gt;</code>: creates a branch</li>
<li><code>git checkout -b &lt;name&gt;</code>: creates a branch and switches to it</li>
<li><code>git merge &lt;revision&gt;</code>: merges <code>&lt;revision&gt;</code> into current branch</li>
<li><code>git merge --abort</code>: abort a merge.</li>
<li><code>git mergetool</code>: use a fancy tool to help resolve merge conflicts</li>
<li><code>git rebase &lt;to-branch&gt; &lt;from-branch&gt;</code>: rebase set of patches of <code>&lt;from-branch&gt;</code> onto a new base, i.e. <code>&lt;to-branch&gt;</code>. If your master branch is <code>A-B-C</code>, and you do rebase to master on another branch: <code>A-B-D</code>, the <strong>HEAD</strong> will be set to master branch, and now master branch is <code>A-B-C-D</code>. It also can be used to combine a few commits to one commit before merging, so that we won’t have to much separate information. Another adv of rebase is that it can simplify the process of merging. This <a href="http://jartto.wang/2018/12/11/git-rebase/" target="_blank" rel="noopener">Chinese post</a> is very helpful to understand <code>rebase</code>.</li>
</ul>
<h3 id="Advanced-Git"><a href="#Advanced-Git" class="headerlink" title="Advanced Git"></a>Advanced Git</h3><ul>
<li><code>git config</code>: Git is highly customizable</li>
<li><code>git clone --shallow</code>: clone without entire version history</li>
<li><code>git add -p</code>: interactive staging</li>
<li><code>git rebase -i</code>: interactive rebasing</li>
<li><code>git blame</code>: show who last edited which line</li>
<li><code>git bisect</code>: binary search history (e.g. for regressions)</li>
<li><code>git tag [commit]</code>: Create a tag on [commit], it is permanent, unlike branches. If you leave the commit off, git will just use whatever HEAD is at</li>
<li><code>git describe &lt;ref&gt;</code>: tell you where you are relative to the closest “anchor” (aka tag)</li>
<li><code>.gitignore</code>: specify intentionally untracked files to ignore</li>
</ul>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><ul>
<li>Use relative ref: the first parent of C1: <code>C1^</code>, the second parent: <code>C1^2</code>，the parent of C1’s parent: <code>C1^^</code>, find the xth ancestor of C1: <code>C1~x</code>.</li>
<li><code>git branch -f [branch] [commit], git reset [commit] (current branch)</code>: move the point of a branch to a specific commit</li>
<li><code>git checkout [commit]</code>: use this command to set <strong>HEAD</strong> to commits (not branch)</li>
<li><code>git cherry-pick [commits]</code>: replicate commits under current <strong>HEAD</strong>.</li>
</ul>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>The following figure visualizes commonly used git commands.<br><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcc0e7e711dc7?imageslim" alt="Detailed relations."></p>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><ol>
<li>The text of this post is largely based on <a href="https://missing.csail.mit.edu/2020/version-control/" target="_blank" rel="noopener">MIT The missing semester</a>, <a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener">RuanYifeng Blog</a>, <a href="https://segmentfault.com/a/1190000006185954" target="_blank" rel="noopener">chanjarster post</a>.</li>
<li>Two exercises are recommended: <a href="https://github.com/git-game/git-game" target="_blank" rel="noopener">git-game</a>, <a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">branching game</a>.</li>
<li><a href="https://marklodato.github.io/visual-git-guide/index-zh-cn.html#rebase" target="_blank" rel="noopener">Visualize Git</a></li>
</ol>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-model"><span class="toc-number">1.</span> <span class="toc-text">Data model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Objects-and-content-addressing"><span class="toc-number">2.</span> <span class="toc-text">Objects and content-addressing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">3.</span> <span class="toc-text">References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Repositories"><span class="toc-number">4.</span> <span class="toc-text">Repositories</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Staging-area"><span class="toc-number">5.</span> <span class="toc-text">Staging area</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commands"><span class="toc-number">6.</span> <span class="toc-text">Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">6.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Undo-Checkout-and-Reset"><span class="toc-number">6.2.</span> <span class="toc-text">Undo, Checkout and Reset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Remote"><span class="toc-number">6.3.</span> <span class="toc-text">Remote</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Branching-and-merging"><span class="toc-number">6.4.</span> <span class="toc-text">Branching and merging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Advanced-Git"><span class="toc-number">6.5.</span> <span class="toc-text">Advanced Git</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Miscellaneous"><span class="toc-number">6.6.</span> <span class="toc-text">Miscellaneous</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Summary"><span class="toc-number">6.7.</span> <span class="toc-text">Summary</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resources"><span class="toc-number">7.</span> <span class="toc-text">Resources</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://jiaomawhu.github.io/2020/05/15/tools/git/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&text=Git Summary"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&is_video=false&description=Git Summary"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Git Summary&body=Check out this article: https://jiaomawhu.github.io/2020/05/15/tools/git/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&title=Git Summary"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://jiaomawhu.github.io/2020/05/15/tools/git/&name=Git Summary&description=&lt;p&gt;A summary of git data model and commonly used commands.&lt;br&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://jiaomawhu.github.io/2020/05/15/tools/git/&t=Git Summary"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2021
    Jinshin
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=129723642"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '129723642');
    </script>

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5f5dad2fbe171a306f5c2925fa8ee9fa";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'https-jiaomawhu-github-io-2';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
